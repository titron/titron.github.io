---
layout: post
title:  "软件是正在怎样吞吃汽车的"
categories: software
tags: automotive， software
author: David
---

* content
{:toc}

---

[原文](https://spectrum.ieee.org/cars-that-think/transportation/advanced-cars/software-eating-car?utm_source=carsthatthink&utm_medium=email&utm_campaign=carsthatthink-07-14-21&utm_content=httpsspectrumieeeorgcarsthatthinktransportationadvancedcarssoftwareeatingcar&mkt_tok=NzU2LUdQSC04OTkAAAF-RE4sRzyUrWvdJ5Oj5UO-jaKaKaFFvM_iB8BZVVTJEsEeDaognvWBb7E1sMiQNg2pLcxPFRD5OZVGKqHigZT_KEI2Hh__Noi-K_gGTrvyiz0z)


以下为google翻译结果：
### 软件如何吞噬汽车

自动驾驶和电动汽车的趋势将为汽车增加数亿行代码。汽车行业能否应对？

![图1](https://github.com/titron/titron.github.io/raw/master/img/2021-07-15-sw_car_1.jpeg)

由于持续的半导体短缺导致全球汽车产量损失的预测 继续上升。一月份， 分析师预测 ，由于短缺，汽车产量将减少 150 万辆；到 4 月，该 数字稳步攀升 至超过 270 万台，到 5 月，已超过 410 万台。

半导体短缺不仅突显了汽车供应链的 脆弱性，而且使人们强烈关注汽车行业对当今汽车中嵌入的数十台隐藏式计算机的依赖。

克莱姆森大学国际汽车研究中心汽车工程系系主任 Zoran Filipi 说：“没有其他行业像汽车行业一样经历着如此迅速的技术变革 。” “这是由于需要解决即将 出台的、越来越严格的 CO 2和标准排放法规，同时随着自动化和信息娱乐的发展保持前所未有的进展速度，并满足客户对性能、舒适性和实用性的期望。” 

今后几年将看到更大的变化，随着越来越多的汽车制造商 承诺 逐步淘汰他们的内燃机（ICE）动力车，以满足 全球气候变化目标 的 电动车取代它们 （EVS）最终将 能够自主经营.

过去十年的 ICE 车辆开发说明了它取得的快速进步以及它的发展方向。
![图2](https://github.com/titron/titron.github.io/raw/master/img/2021-07-15-sw_car_2.jpeg)


图表标题为“由于芯片短缺导致汽车产量短缺”。
图：马克蒙哥马利
“曾经，软件是汽车的一部分。现在，软件决定了汽车的价值，”慕尼黑技术大学信息学名誉教授、汽车软件领域的领先专家曼弗雷德·布罗伊 (Manfred Broy) 指出 。 “汽车的成功取决于它的软件，而不是机械方面。” 他说，几乎所有汽车制造商或业内人士所称的原始设备制造商 (OEM) 的车辆创新现在都与软件有关。

十年前，只有高档汽车才包含 100 个基于微处理器的电子控制单元 (ECU)，这些电子控制单元在整个汽车车身联网，执行 1 亿行或更多代码。今天，像宝马 7 系这样拥有先进驾驶辅助系统 (ADAS) 等先进技术的高端汽车 可能包含 150 个或更多的 ECU，而像福特的 F-150这样的皮卡则有 1.5 亿行代码。即使是低端车辆也正在迅速接近 100 个 ECU 和 1 亿行代码，因为更多曾经被认为是豪华选项的功能，例如 自适应巡航控制 和 自动紧急制动，正在成为标准配置。

自 2010 年起强制要求的其他安全功能，如  欧盟的电子稳定控制、 备用摄像头和 自动紧急呼叫 (eCall)，以及更 严格的排放标准 ，而 ICE 车辆 只能 使用更具创新性的电子设备和软件才能满足这些标准。进一步推动 ECU 和软件的扩散。

咨询公司Deloitte Touche Tohmatsu Limited 估计，截至 2017 年，约 40% 的新车成本 可归因于基于半导体的电子系统，成本自 2007 年以来翻了一番。据估计，到 2030 年，这一比例将接近 50%。公司进一步预测，今天每辆新车都装有价值约 600 美元的半导体， 由多达 3,000 个 各种类型的芯片组成。

总计 ECU 和软件线的数量仅暗示了当今车辆中存在的错综复杂的电子编排和软件编排。通过观察它们如何协同工作，从驾驶员的角度来看本应不可见的非凡复杂性开始出现。新的安全性、舒适性、性能和娱乐功能，为购买者提供多种选择的商业必要性导致每种品牌和型号的多种变体，以及从汽油和人类驾驶员转向电动和人工智能驾驶员以及数百种需要编写、检查、调试和抵御黑客攻击的数百万行新代码正在使汽车成为带轮子的超级计算机，并迫使汽车行业适应。但是可以吗？ 

### 特性和变体驱动复杂性
在过去的二十年里，提供更多安全和娱乐功能的动力已经将汽车从单纯的交通工具转变为移动计算中心。与服务器机架和高速光互连不同，ECU 和线束在整个车辆内外进行数据通信。然后每次去杂货店时都会运行数百万行代码。
![图3](https://github.com/titron/titron.github.io/raw/master/img/2021-07-15-sw_car_3.png)

Vard Antinyan 是沃尔沃汽车的软件质量专家，  他 撰写了 大量有关软件和系统复杂性的文章，他 解释说，截至 2020 年，“沃尔沃拥有大约 120 个 ECU 的超集，它从中选择创建每辆沃尔沃汽车中都存在的系统架构。它们总共包含 1 亿行源代码。” Antinyan 说，这个源代码“包含 1000 万条条件语句以及 300 万个函数，这些函数在源代码中的大约 3000 万处被调用。” 

每个 ECU 中驻留的软件数量和类型差异很大，这取决于 ECU的计算能力、  ECU 控制的功能、需要处理的内部和外部信息和通信以及它们是否是事件或时间触发，以及强制性安全和其他监管要求。在过去的十年中，越来越多的 ECU 软件致力于确保运行质量、可靠性、安全性和保障性。

“用于检测不当行为以确保质量和安全的软件数量正在增加，”采埃孚公司软件解决方案和全球软件中心副总裁 Nico Hartmann 说，采 埃孚股份公司是全球最大的汽车零部件供应商之一。 Hartmann 表示，十年前可能有 三分之一的 ECU 软件专门用于确保质量运行，现在通常超过一半或更多，尤其是在安全关键系统中。

哪些 ECU 和相关软件最终会进入沃尔沃，例如它的豪华 SUV XC90 车型，它 有大约 110 个 ECU，取决于几个因素。与所有汽车制造商一样，沃尔沃针对不同的细分市场提供每种车型的变体。正如Antinyan 指出的那样，“在瑞典购买完全相同型号沃尔沃的人可能与在美国出售的车型不同”不仅每辆车都需要满足地区监管制度，而且每个车主都可以在几个可选的车型中进行选择沃尔沃提供的发动机、驱动、安全或其他功能。无论选择何种标准、可选和法律要求的设备配置，都将决定嵌入车辆的 ECU、软件和相关电子设备的确切数量和类型，所有这些都必须能够无缝协同工作。 

有效管理变体复杂性是整个汽车行业的一个重要问题。
对于一家汽车制造商来说，“车辆变体管理非常困难”，Antinyan 说，“因为它涉及到每个人。” 例如，营销部门希望为不同的客户群提供具有无数功能的多种类型的车辆，而设计和工程部门则希望减少变体以帮助保持系统集成、测试、验证和验证工作是可控的。功能的每一次增加都意味着需要额外的传感器、执行器、ECU 和随附的软件，因此需要额外的集成工作以确保它们正常工作。

德勤估计 ，从开发开始到生产开始，车辆开发预算的 40% 或更多可归因于 系统集成、测试、验证和验证。跟踪生产和销售的每个模型中的所有当前和传统电子产品和软件可能是一项艰巨的任务。毫不奇怪， 有效管理变体复杂性 是整个汽车行业的一个重要问题。

毫无疑问，连接所有 ECU、传感器和其他电子设备并 为其供电需要大量布线和 人工将它们穿过车辆。数以千计的线束变体支持车辆定制和多个物理网络总线， 以控制通过车辆的信号流。

车辆的物理电子架构带来了更多需要应对的网络设计约束。许多 ECU 需要靠近与其交互的传感器和执行器，例如用于制动系统或发动机控制的 ECU。因此，可以连接数千个组件的汽车网络线束可能包含 1,500 多根电线，总长度为 5,000 米 ， 重量超过68 公斤。随着 ECU、传感器和相关电子设备数量的增加，减少线束重量和复杂性已成为汽车制造商的主要目标。 

### 测试挑战
即使花费了大量精力、时间和金钱来确保所有不同的电子设备协同工作，也不是每个可能的 ECU 构建组合都可以在生产开始之前进行彻底测试。虽然车辆的安全内容往往主要是固定的，但 ECU 构建的复杂性更多地体现在可选的消费者舒适性和便利性或性能功能上。在某些情况下，由于可选特性和功能的特定组合，“从生产线上下线的车辆将是第一次测试特定配置，”采埃孚汽车系统产品规划副总裁 Andy Whydell 说。
![图4](https://github.com/titron/titron.github.io/raw/master/img/2021-07-15-sw_car_4.jpeg)

图表标题为“电子系统占汽车总成本的百分比”。
图表：马克·蒙哥马利；资料来源：德勤华永有限公司
一些汽车制造商拥有数十万种单个车型的潜在构建组合，甚至更多。他说，要对某些车型中可能的各种电子设备组合进行现场测试，“将需要十亿次测试设置”。然而，在车辆开发过程中，原始设备制造商可以使用“面包板”对多个 ECU 构建组合进行实验室测试，Whydell 表示，无需为每种情况构建独特的车辆。  

即使是经过高度测试的流行型号，软件相关的错误也会在售出后定期发现并纠正。有时更正需要更正， 通用汽车公司 在 召回 其最畅销的汽车 2019 年 雪佛兰 Silverado 以及 GMC  Sierra 轻型卡车和凯迪拉克 CT6 时就发生了这种情况。 

使变体管理更具挑战性，Whydell 指出，“几乎所有 ECU 设计和软件都外包给供应商，OEM 集成 ECU”以根据所需的可定制功能创建统一的系统。Whydell 表示，个别供应商通常对 OEM 如何将 ECU 集成在一起没有深入的了解。同样，原始设备制造商对驻留在 ECU 中的软件的了解有限，这些软件通常作为“黑匣子”获得，以支持多种功能之一，例如信息娱乐、车身和一致性控制、远程信息处理、动力传动系统或自动驾驶辅助系统。 

大众估计，其车辆中只有 10% 的软件是内部开发的。
时任大众汽车集团首席执行官 、现任董事长的赫伯特·迪斯 (Herbert Diess) 在 2020 年发表的评论说明了汽车制造商开发的软件是多么少 ，当时他 承认 “几乎没有一行软件代码来自我们”。大众估计，其车辆中只有 10% 的软件是内部开发的。其余 90 %  由数十家供应商提供，据报道，在一些 OEM 中，这一 数字达到 50 多个。 

如此多的软件供应商，每个都有自己的开发方法，使用自己的操作系统和语言显然增加了另一层复杂性，尤其是在执行验证和确认方面。最近Strategy Analytics 和 Aurora Labs 对 整个汽车供应链的软件开发人员进行的一项调查强调了这一点，该 调查询问了解一个 ECU 中的代码更改何时影响另一个 ECU 的难度。大约 37 % 的受访者表示很难，31% 表示非常困难，7% 表示几乎不可能，而 16% 表示不可能。 

汽车公司及其供应商意识到他们必须更多地合作以保持对数据配置管理的更严格控制，以防止由于意外的 ECU 代码更改而发生意外后果。但两人都承认还有很长的路要走。 

### 加强安全
当然，汽车制造商必须确保软件不仅安全可靠，而且安全。安全研究人员  在 2015 年远程接管了 2014 年的 Jeep Cherokee，这为该行业敲响了警钟。现在，每个供应商和 OEM 都认识到网络安全乏力的威胁；据报道，通用汽车  有 90 名工程师全职致力于开发网络安全对策。

然而，十年前，“汽车软件的设计初衷是为了安全。安全是一个遥远的第二，” Mashrur乔杜里，美国运输部的车辆网络安全专家和导演说， 中心连接多模移动 在 克莱姆森大学。这是值得注意的，因为大部分软件是在十年或更长时间前设计的，当时安全性不是现在的优先事项，今天仍在 ECU 中使用。 

“潜在的攻击面几乎每天都在增加。”
——马什鲁尔·乔杜里
此外，在过去十年中，车辆内部和外部通信呈爆炸式增长。2008 年， 估计有 2,500 个数据信号 在豪华汽车的 ECU 之间交换。沃尔沃的 Antinyan 表示，如今有 7,000 多个外部信号连接了沃尔沃汽车中的 120 个 ECU，而正在交换的汽车内部信号数量要高出两个数量级。咨询公司 McKinsey & Company 估计， 这些信息每小时可以轻松超过 25 GB 的数据。

Chowdhury 说，随着过去十年移动应用程序和基于云的服务的爆炸式增长，更不用说汽车本身内置的越来越复杂的电子设备，“潜在的攻击面几乎每天都在增加”。  

各国政府也注意到了这一点，并对汽车制造商施加了多项网络安全义务。其中包括拥有经过认证的 网络安全管理系统 (CSMS)，该系统要求每个制造商“展示基于风险的管理框架，以发现、分析和防范相关威胁、漏洞和网络攻击”。 

此外，OEM 将需要一个 软件更新管理系统，以确保安全地管理无线软件更新。还鼓励汽车制造商  “维护用于每个汽车 ECU、每个组装车辆的操作软件组件的数据库，以及在车辆生命周期内应用的版本更新的历史日志。” 该软件物料清单可以帮助汽车制造商快速确定哪些 ECU 和特定车辆会受到给定网络漏洞的影响。

### 软机械师
大多数司机不会太注意周围的所有电子阵列——除非它们很烦人或停止工作。随着过去十年电子内容的增加，驾驶员有很多机会关注车辆的电子设备。
![图5](https://github.com/titron/titron.github.io/raw/master/img/2021-07-15-sw_car_5.jpeg)

根据 金融咨询公司Stout Risius Ross编制 的 2020 年汽车缺陷和召回报告，2019 年是创纪录的一年，有 1500 万辆汽车因电子元件缺陷而被召回。一半的召回涉及基于软件的缺陷，这是 Stout 自 2009 年以来测得的最高比例。  

图表标题为“因电子元件缺陷而召回的车辆百分比”。
图表：马克·蒙哥马利；资料来源：粗壮的 Risius Ross
近 30% 的缺陷与软件集成有关，其中软件与车辆中其他电子组件或系统的接口导致故障。 三菱汽车 召回了 60,000 辆 SUV， 因为其液压单元 ECU 中的软件错误干扰了多个安全系统。 

最后，超过 50% 的缺陷的特征不是明显由软件缺陷引起的故障，但对软件进行更新是使用的补救措施。 福特汽车公司 召回了其 Fusion 和 Escape 车辆的某些型号，因为冷却液可能会进入发动机气缸孔，这可能会永久损坏发动机。福特的解决方法是重新编程车辆的动力系统控制软件，以减少冷却液进入发动机气缸的可能性。Stout 的数据显示，在过去五年中，用于修复车辆硬件问题的软件的发生率稳步上升。 

2019 年是创纪录的一年，有 1500 万辆汽车因电子元件缺陷被召回。一半的召回涉及基于软件的缺陷。
“平均召回规模一直在下降，车辆的平均年龄也在下降，”Stout 董事总经理 Neil Steinkamp 说。“制造商正在利用技术更快地发现缺陷，”尤其是那些涉及电子产品的缺陷。与软件相关的缺陷往往会在较新的车辆中发现，而 ECU 和其他电子元件缺陷往往是在车辆推出一段时间后才会出现。

Stout 董事 Robert Levine 指出，最近与车辆电子设备相关的组件缺陷有所增加，“从车主方便到安全关键组件”。例如，自从 2018 年 5 月 1 日之后制造的所有车辆都被要求为驾驶员提供车辆正后方 3 x 6 米的可见区域以来，美国就发生了一系列倒车摄像头召回事件 。许多原始设备制造商发现将更复杂的摄像头软件与其他车辆安全系统集成被证明是困难的。

其他新的车辆安全系统的运行也并非完全顺利。美国汽车协会 (AAA) 对可以帮助驾驶员进行转向或制动/加速的先进驾驶辅助系统进行的一项研究 表明，这些系统通常会在没有注意到的情况下脱离，立即将控制权交还给驾驶员。它的测试表明，平均每 13 公里就会出现某种类型的问题，包括难以将车辆保持在车道内或与其他车辆或护栏靠得太近。

### 持续增高的维修费用 
许多车主在必须支付维修费用时才意识到他们的车辆越来越复杂。劳动力成本的近60％的修复涉及与先进的安全车辆碰撞功能 结果 从车辆的电子元件。如果车辆配备安装在挡风玻璃上的摄像头，用于自动紧急制动、自适应巡航控制和车道偏离警告系统，2018 年，即使是轻微的损坏，例如一个破旧的挡风玻璃，成本在 210 至 220 美元之间，现在已经攀升至 1,650 美元。 AAA 研究 表明。校准所有这些系统的费用（通常是手动完成的）是主要的成本驱动因素。

因为即使传感器的微小错误校准也会大大降低这些安全功能的有效性，“供应商开发了自动校准和自动校准系统，可以消除或简化手动过程，”采埃孚的Whydell 说，有助于提高校准精度，同时减少维修成本。

修理涉及具有高级安全功能的车辆的碰撞事故的人工成本中，将近 60% 来自车辆的电子设备。
Whydell 还表示，供应商和原始设备制造商 (OEM) 正在研究如何将倾向于安装在车辆周边的传感器放置在不太可能在事故中损坏的地方。AAA 报告称，仅维修位于后保险杠中的超声波系统（可提供停车辅助功能）的成本约为 1,300 美元；如果用于盲点监测和交叉路口警报的后方雷达传感器也被损坏，则追尾损坏可能会产生另外 2,050 美元的额外费用。 

随着电子产品的维修成本攀升，保险公司宣布车辆全损的成本已经降低。 理赔管理公司 米切尔国际 ( Mitchell International)最近的 一份报告称，其数据显示，由于汽车电子设备的维修成本，被宣布为全损的车辆的平均车龄一直在下降。报告指出，随着“车辆复杂性的提高”，预计这一趋势将持续下去。

### EV + AI = 难以管理的复杂性
汽车制造商陷入了一个特殊的难题。根据最新的 JD Power 美国车辆可靠性研究，今天的内燃机车辆是 32 年来最可靠的。它们也更舒适、更安全、污染更少。然而，为了解决政府和公众对全球气候变化日益增长的担忧，制造商发现自己不得不放弃精心制作的 ICE 汽车，转而使用具有自动驾驶能力的电动汽车。将来。

让他们的困境更加困难的是，要开发电动汽车，制造商必须跨越软件的深渊。

ZF 的 Andy Whydell 观察到，在当今的车辆中，“使用当今架构的软件变得难以管理”。其他人也赞同这种信念。据咨询公司 McKinsey & Company 称，车辆软件的复杂性正在迅速超过开发和维护的能力。 在过去十年中，软件 复杂性增加了四倍，但供应商和 OEM 软件的生产力几乎没有同时提高。此外， 它表示，在未来十年内，软件的复杂性可能会再增加 三倍。汽车制造商和供应商都在努力缩小“开发-生产力差距”。 

“曾经，软件是汽车的一部分。现在，软件决定了汽车的价值。”
——曼弗雷德·布罗伊
部分问题在于支持稳定增长的代码库，一位汽车公司负责人告诉麦肯锡，按照目前的速度，如果差距不缩小，现有代码库的软件维护将消耗其所有软件研发资源。实际上，Whydell 观察到，“在某些情况下，汽车行业不再将总代码行数视为复杂性的衡量标准，而是 OEM 或供应商为满足当前和未来需求而雇用的软件人员数量。” 

如果正如大众汽车董事长赫伯特·迪斯所说，“软件将占未来汽车创新的 90%”，那么缩小开发与生产力之间的差距看起来尤其令人生畏。拥有必要的软件专业知识将是成功的关键。正如麦肯锡 所说 ，“虽然汽车组织必须在许多层面上出类拔萃才能赢得软件游戏，但吸引和留住顶尖人才可能是最关键的方面。” ZF 的Whydell 承认，难怪为什么使用正确的软件专业知识是“让我夜不能寐”的原因之一。它还让所有其他供应商和 OEM 经理保持清醒。 

OEM 迟迟认识到，这在很大程度上要归功于 Elon Musk 以特斯拉形式提出的软件定义汽车概念，他们目前将必要的软件和电子设备外包给供应商，然后将它们集成到 ICE 车辆中的方法不适用于电动汽车。

功能和在内燃机汽车使用的分散ECU架构的复杂性“已经达到了极限，”塔玛拉斯诺的研究和一级汽车供应商先进的工程头 大陆公司 的 报价 在 病房自动 的话说。如果完全自动驾驶功能需要大约5 亿 行 或 更多代码行，则尤其如此 。

“在某些情况下，汽车行业不再将总代码行数视为衡量复杂性的指标，而是 OEM 或供应商为满足当前和未来需求而雇用的软件人员数量。” 
——安迪·怀德尔
需要新的车辆软件和物理架构来管理电池组，而不是内燃机和相关的动力传动系统。该架构将仅包含少数功能强大、速度极快的计算机处理器，这些处理器执行微服务驱动的代码，并通过更轻的线束或什至是无线的更多传感器进行内部通信，仅适用于初学者。外部沟通也将更加重要。ZF 的 Hartmann 指出，这些新架构需要由 OEM 和供应商的软件团队以低成本和不断缩短的时间周期开发，他们将学习开发软件和系统的新方法。

Manfred Broy 表示，最大的问题可能是执行套件中的软件专业知识不足以理解所需的转型。虽然硬件复杂性是车辆最明显的方面，但 Broy 观察到，“我认为更重要的是软件的复杂性（这在很大程度上取决于硬件的选择），尤其是软件的成本，这对于原始设备制造商，并且由于其长期发展而变得更加重要。” 他说，汽车业的高管套房里挤满了“昨天的人”，“但他们仍在掌权。”

克莱姆森的 Zoran Filipi 解释说：“一百多年来，原始设备制造商一直专注于完善内燃机，将其余车辆外包给供应商，然后将所有组件集成在一起。随着电子产品和软件开始在车辆中使用，采用了相同的方法——它们只是集成到车辆中的另一个‘黑匣子’。” 现在，他说，“原始设备制造商及其供应商需要将他们的组织从硬件优先的方法转变为软件优先的心态，同时至少在未来十年内仍然使用现有方法支持和改进 ICE 车辆。” 

前头彼得·梅尔滕斯， 奥迪公司的 R＆d和董事会成员，在说 最近的一次采访 与 CleanTechnica，“德国汽车业提供了他们最重要的新产品，这将决定他们是否在其现有的结构生存的公司，有责任的经理对他们最关键的部分软件的经验和知识最少。”

默滕斯接着说，我们需要的是一种淘汰不适合其职位的高管的方法。“明天与大众、奥迪、保时捷、宝马和戴姆勒的所有高层管理人员进行一次工作评估，让他们编写一个小游戏或一个简单但有效的病毒，”他说。“如果他们做不到，立即解雇他们，因为他们不适合这份工作。” Mertens 问道，还剩下多少人？留在地板上的血将是一个线索。
