---
layout: post
title:  "单片机外接晶体振荡幅度太大造成单片机不能上电工作"
categories: 电路
tags: 单片机 电路 振荡器
author: David
---

* content
{:toc}

遇到了一个单片机上电不工作的问题，仔细检查过电源、地、复位电路后，原因锁定到时钟电路上。

单片机外接晶体振荡电路的连接参见下图：：

![单片机外接晶体振荡器电路](https://github.com/titron/titron.github.io/raw/master/img/2019-10-16-Crystal.png)

出于成本考虑，一般在用的时候会省去反馈电阻Rf和幅度衰减电阻R1。

其中，
Rf为反馈电阻，其作用是稳定输出幅度和相位，其取值为200K~1Mohm；

R1为驱动限流电阻，限制反向放大器输出幅度，同时起到抑制EMI的作用。该电阻可以不使用，但当芯片输出功率较大时，或是振荡频率较高时，建议使用该限流电阻，以防止晶体被过驱动；该电阻不能太大，其阻值应与C2电容的电抗值（在振荡频率下）相当。

C1,C2为负载电容。

这次的问题原因就是省去电阻R1造成的。

现象：

单片机上电不工作，示波器测量Xout端对地时钟幅度达到8V左右，不知道为什么这么高？

解决方法：

串接幅度衰减电阻R1 = 4.7K后，单片机上电工作正常了。

不过，示波器在Xout端测量不到时钟波形了，衰减太大了？

结论：

做工合格的晶体，一般不会有这样的问题。

可是如果选到了质量一般的晶体，就会有上面的问题。

所以，建议电路还是按上面的连接来。